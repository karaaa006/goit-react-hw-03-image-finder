{"version":3,"sources":["api/api.js","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","App.jsx","index.js"],"names":["api","axios","create","baseURL","params","key","per_page","image_type","orientation","getImages","q","a","get","data","console","log","getNextPage","currentPage","Searchbar","onSubmit","className","type","name","autoComplete","autoFocus","placeholder","ImageGalleryItem","largeImageURL","id","webformatURL","onClick","src","alt","ImageGallery","imageArr","onClickImage","map","Button","children","modalRoot","document","getElementById","Modal","handleKeydown","e","code","props","onClose","handleOverlayClick","overlay","querySelector","window","addEventListener","this","removeEventListener","createPortal","imgUrl","Component","App","state","query","maxPage","loading","showModal","currentImage","handleSubmit","preventDefault","setState","target","searchInput","value","res","totalHits","totalImages","hits","Math","ceil","length","handleClickMore","prev","images","toggleModal","handleClickImage","dataset","large","color","height","width","visible","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.7290507a.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst api = axios.create({\n  baseURL: \"https://pixabay.com/api/\",\n  params: {\n    key: \"23524775-df2d338982330c0756c93cc31\",\n    per_page: 12,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n  },\n});\n\nexport async function getImages(q) {\n  try {\n    const { data } = await api.get(`?q=${q}`);\n\n    return data;\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nexport async function getNextPage(q, currentPage) {\n  try {\n    const { data } = await api.get(`?q=${q}&page=${currentPage}`);\n\n    return data;\n  } catch (e) {\n    console.log(e);\n  }\n}\n","export function Searchbar({ onSubmit }) {\r\n  return (\r\n    <header className=\"Searchbar\">\r\n      <form className=\"SearchForm\" onSubmit={onSubmit}>\r\n        <button type=\"submit\" className=\"SearchForm-button\">\r\n          <span className=\"SearchForm-button-label\">Search</span>\r\n        </button>\r\n\r\n        <input\r\n          name=\"searchInput\"\r\n          className=\"SearchForm-input\"\r\n          type=\"text\"\r\n          autoComplete=\"off\"\r\n          autoFocus\r\n          placeholder=\"Search images and photos\"\r\n        />\r\n      </form>\r\n    </header>\r\n  );\r\n}\r\n","export function ImageGalleryItem({ largeImageURL, id, webformatURL, onClick }) {\r\n  return (\r\n    <li className=\"ImageGalleryItem\" id={id}>\r\n      <img\r\n        className=\"ImageGalleryItem-image\"\r\n        src={webformatURL}\r\n        alt=\"\"\r\n        data-large={largeImageURL}\r\n        onClick={onClick}\r\n      />\r\n    </li>\r\n  );\r\n}\r\n","import { ImageGalleryItem } from \"../ImageGalleryItem/ImageGalleryItem\";\r\n\r\nexport function ImageGallery({ imageArr, onClickImage }) {\r\n  return (\r\n    <ul className=\"ImageGallery\">\r\n      {imageArr.map(({ largeImageURL, id, webformatURL }) => (\r\n        <ImageGalleryItem\r\n          key={id}\r\n          largeImageURL={largeImageURL}\r\n          webformatURL={webformatURL}\r\n          id={id}\r\n          onClick={onClickImage}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n","export function Button({ children, onClick }) {\r\n  return (\r\n    <button className=\"Button\" type=\"button\" onClick={onClick}>\r\n      {children}\r\n    </button>\r\n  );\r\n}\r\n","import { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\n\r\nconst modalRoot = document.getElementById(\"modal-root\");\r\n\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    const overlay = document.querySelector(\".Overlay\");\r\n\r\n    window.addEventListener(\"keydown\", this.handleKeydown);\r\n\r\n    overlay.addEventListener(\"click\", this.handleOverlayClick);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const overlay = document.querySelector(\".Overlay\");\r\n\r\n    window.removeEventListener(\"keydown\", this.handleKeydown);\r\n\r\n    overlay.removeEventListener(\"click\", this.handleOverlayClick);\r\n  }\r\n\r\n  handleKeydown = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleOverlayClick = () => {\r\n    this.props.onClose();\r\n  };\r\n  render() {\r\n    return createPortal(\r\n      <div className=\"Overlay\">\r\n        <div className=\"Modal\">\r\n          <img src={this.props.imgUrl} alt=\"\" />\r\n        </div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\n","import \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport { Component } from \"react\";\r\nimport { getImages, getNextPage } from \"./api/api\";\r\nimport \"./App.scss\";\r\nimport { Searchbar } from \"./components/Searchbar/Searchbar\";\r\nimport { ImageGallery } from \"./components/ImageGallery/ImageGallery\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport { Button } from \"./components/Button/Button\";\r\nimport Modal from \"./components/Modal/Modal\";\r\n/**\r\n * Добавить propTypes\r\n * Проверить баги\r\n *\r\n */\r\nclass App extends Component {\r\n  state = {\r\n    query: \"\",\r\n    imageArr: [],\r\n    currentPage: 1,\r\n    maxPage: 0,\r\n    loading: false,\r\n    showModal: false,\r\n    currentImage: \"\",\r\n  };\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      this.setState({\r\n        query: e.target.searchInput.value,\r\n        currentPage: 1,\r\n        loading: true,\r\n      });\r\n\r\n      const res = await getImages(e.target.searchInput.value);\r\n      const totalImages = await res.totalHits;\r\n      const imageArr = await res.hits;\r\n\r\n      const maxPage = Math.ceil(totalImages / imageArr.length);\r\n\r\n      this.setState({\r\n        maxPage,\r\n        imageArr,\r\n        loading: false,\r\n      });\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n\r\n  handleClickMore = async () => {\r\n    try {\r\n      this.setState((prev) => {\r\n        return {\r\n          currentPage: prev.currentPage + 1,\r\n          loading: true,\r\n        };\r\n      });\r\n      const res = await getNextPage(\r\n        this.state.query,\r\n        this.state.currentPage + 1\r\n      );\r\n      const images = await res.hits;\r\n\r\n      this.setState((prev) => {\r\n        return {\r\n          imageArr: [...prev.imageArr, ...images],\r\n          loading: false,\r\n        };\r\n      });\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n\r\n  toggleModal = () => {\r\n    this.setState(({ showModal }) => ({\r\n      showModal: !showModal,\r\n    }));\r\n  };\r\n\r\n  handleClickImage = (e) => {\r\n    const currentImage = e.target.dataset.large;\r\n\r\n    this.setState({\r\n      currentImage,\r\n    });\r\n\r\n    this.toggleModal();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <Searchbar onSubmit={this.handleSubmit} />\r\n        <ImageGallery\r\n          imageArr={this.state.imageArr}\r\n          onClickImage={this.handleClickImage}\r\n        />\r\n        <Loader\r\n          type=\"TailSpin\"\r\n          color=\"#3f51b5\"\r\n          height={100}\r\n          width={100}\r\n          visible={this.state.loading}\r\n        />\r\n        {/* Отображаем кнопку только если есть изображения на странице и \r\n            отрендеренна НЕпоследняя страница */}\r\n        {this.state.imageArr.length > 0 &&\r\n          this.state.currentPage < this.state.maxPage && (\r\n            <Button onClick={this.handleClickMore}>Load more</Button>\r\n          )}\r\n\r\n        {this.state.showModal && (\r\n          <Modal imgUrl={this.state.currentImage} onClose={this.toggleModal} />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}