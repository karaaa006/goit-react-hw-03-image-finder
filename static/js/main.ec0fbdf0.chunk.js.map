{"version":3,"sources":["api/api.js","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","App.jsx","index.js"],"names":["api","axios","create","baseURL","params","key","per_page","image_type","orientation","getImages","q","a","get","data","console","log","getNextPage","currentPage","Searchbar","state","query","handleChange","e","target","value","name","setState","className","onSubmit","this","props","type","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","tags","webformatURL","onClick","largeImageURL","src","alt","ImageGallery","imageArr","onClickImage","map","id","Button","children","modalRoot","document","getElementById","Modal","handleKeydown","code","onClose","handleOverlayClick","overlay","querySelector","window","addEventListener","removeEventListener","createPortal","img","App","maxPage","loading","showModal","currentImage","handleSubmit","preventDefault","res","totalHits","totalImages","hits","Math","ceil","length","handleClickMore","prev","images","toggleModal","handleClickImage","color","height","width","visible","ReactDOM","render","StrictMode"],"mappings":"sUAEMA,E,OAAMC,EAAMC,OAAO,CACvBC,QAAS,2BACTC,OAAQ,CACNC,IAAK,qCACLC,SAAU,GACVC,WAAY,QACZC,YAAa,gBAIV,SAAeC,EAAtB,kC,4CAAO,WAAyBC,GAAzB,iBAAAC,EAAA,+EAEoBX,EAAIY,IAAJ,aAAcF,IAFlC,uBAEKG,EAFL,EAEKA,KAFL,kBAIIA,GAJJ,gCAMHC,QAAQC,IAAR,MANG,0D,sBAUA,SAAeC,EAAtB,oC,4CAAO,WAA2BN,EAAGO,GAA9B,iBAAAN,EAAA,+EAEoBX,EAAIY,IAAJ,aAAcF,EAAd,iBAAwBO,IAF5C,uBAEKJ,EAFL,EAEKA,KAFL,kBAIIA,GAJJ,gCAMHC,QAAQC,IAAR,MANG,0D,+CCnBMG,EAAb,4MACEC,MAAQ,CACNC,MAAO,IAFX,EAKEC,aAAe,SAACC,GACd,MAAwBA,EAAEC,OAAlBC,EAAR,EAAQA,MAAOC,EAAf,EAAeA,KAEf,EAAKC,SAAL,eACGD,EAAOD,KATd,4CAaE,WACE,OACE,wBAAQG,UAAU,YAAlB,SACE,uBAAMA,UAAU,aAAaC,SAAUC,KAAKC,MAAMF,SAAlD,UACE,wBAAQG,KAAK,SAASJ,UAAU,oBAAhC,SACE,sBAAMA,UAAU,0BAAhB,sBAGF,uBACEF,KAAK,QACLE,UAAU,mBACVI,KAAK,OACLC,aAAa,MACbC,WAAS,EACTC,YAAY,2BACZV,MAAOK,KAAKV,MAAMC,MAClBe,SAAUN,KAAKR,wBA7B3B,GAA+Be,aCDxB,SAASC,EAAT,GAKH,IAJFC,EAIC,EAJDA,KACAC,EAGC,EAHDA,aACAC,EAEC,EAFDA,QACAC,EACC,EADDA,cAEA,OACE,oBACEd,UAAU,mBACVa,QAAS,kBAAMA,EAAQ,CAAEC,gBAAeH,UAF1C,SAIE,qBAAKX,UAAU,yBAAyBe,IAAKH,EAAcI,IAAKL,MCV/D,SAASM,EAAT,GAAmD,IAA3BC,EAA0B,EAA1BA,SAAUC,EAAgB,EAAhBA,aACvC,OACE,oBAAInB,UAAU,eAAd,SACGkB,EAASE,KAAI,gBAAGC,EAAH,EAAGA,GAAIT,EAAP,EAAOA,aAAcD,EAArB,EAAqBA,KAAMG,EAA3B,EAA2BA,cAA3B,OACZ,cAACJ,EAAD,CAEEE,aAAcA,EACdE,cAAeA,EACfH,KAAMA,EACNE,QAASM,GAJJE,Q,qBCNR,SAASC,EAAT,GAAwC,IAAtBC,EAAqB,EAArBA,SAAUV,EAAW,EAAXA,QACjC,OACE,wBAAQb,UAAU,SAASI,KAAK,SAASS,QAASA,EAAlD,SACGU,ICDP,IAAMC,EAAYC,SAASC,eAAe,cAErBC,E,4MASnBC,cAAgB,SAACjC,GACA,WAAXA,EAAEkC,MACJ,EAAK1B,MAAM2B,W,EAIfC,mBAAqB,SAACpC,GACpB,IAAMqC,EAAUP,SAASQ,cAAc,YAEnCtC,EAAEC,SAAWoC,GACf,EAAK7B,MAAM2B,W,uDAlBf,WACEI,OAAOC,iBAAiB,UAAWjC,KAAK0B,iB,kCAG1C,WACEM,OAAOE,oBAAoB,UAAWlC,KAAK0B,iB,oBAgB7C,WACE,OAAOS,uBACL,qBAAKrC,UAAU,UAAUa,QAASX,KAAK6B,mBAAvC,SACE,qBAAK/B,UAAU,QAAf,SACE,qBAAKe,IAAKb,KAAKC,MAAMmC,IAAIxB,cAAeE,IAAKd,KAAKC,MAAMmC,IAAI3B,WAGhEa,O,GA7B6Bf,aCI7B8B,E,4MACJ/C,MAAQ,CACNC,MAAO,GACPyB,SAAU,GACV5B,YAAa,EACbkD,QAAS,EACTC,SAAS,EACTC,WAAW,EACXC,aAAc,I,EAGhBC,a,uCAAe,WAAOjD,GAAP,qBAAAX,EAAA,6DACbW,EAAEkD,iBADW,SAIX,EAAK9C,SAAS,CACZN,MAAOE,EAAEC,OAAOH,MAAMI,MACtBP,YAAa,EACbmD,SAAS,IAPA,SAUO3D,EAAUa,EAAEC,OAAOH,MAAMI,OAVhC,cAULiD,EAVK,gBAWeA,EAAIC,UAXnB,cAWLC,EAXK,iBAYYF,EAAIG,KAZhB,QAYL/B,EAZK,OAcLsB,EAAUU,KAAKC,KAAKH,EAAc9B,EAASkC,QAEjD,EAAKrD,SAAS,CACZyC,UACAtB,WACAuB,SAAS,IAnBA,kDAsBXtD,QAAQC,IAAR,MAtBW,0D,wDA0BfiE,gB,sBAAkB,8BAAArE,EAAA,sEAEd,EAAKe,UAAS,SAACuD,GACb,MAAO,CACLhE,YAAagE,EAAKhE,YAAc,EAChCmD,SAAS,MALC,SAQIpD,EAChB,EAAKG,MAAMC,MACX,EAAKD,MAAMF,YAAc,GAVb,cAQRwD,EARQ,gBAYOA,EAAIG,KAZX,OAYRM,EAZQ,OAcd,EAAKxD,UAAS,SAACuD,GACb,MAAO,CACLpC,SAAS,GAAD,mBAAMoC,EAAKpC,UAAX,YAAwBqC,IAChCd,SAAS,MAjBC,kDAqBdtD,QAAQC,IAAR,MArBc,0D,EAyBlBoE,YAAc,WACZ,EAAKzD,UAAS,kBAAoB,CAChC2C,WADY,EAAGA,e,EAKnBe,iBAAmB,SAACd,GAClB,EAAK5C,SAAS,CACZ4C,iBAGF,EAAKa,e,4CAGP,WACE,OACE,sBAAKxD,UAAU,MAAf,UACE,cAAC,EAAD,CAAWC,SAAUC,KAAK0C,eAC1B,cAAC3B,EAAD,CACEC,SAAUhB,KAAKV,MAAM0B,SACrBC,aAAcjB,KAAKuD,mBAErB,cAAC,IAAD,CACErD,KAAK,WACLsD,MAAM,UACNC,OAAQ,IACRC,MAAO,IACPC,QAAS3D,KAAKV,MAAMiD,UAIrBvC,KAAKV,MAAM0B,SAASkC,OAAS,GAC5BlD,KAAKV,MAAMF,YAAcY,KAAKV,MAAMgD,SAClC,cAAClB,EAAD,CAAQT,QAASX,KAAKmD,gBAAtB,uBAGHnD,KAAKV,MAAMkD,WACV,cAAC,EAAD,CAAOJ,IAAKpC,KAAKV,MAAMmD,aAAcb,QAAS5B,KAAKsD,qB,GAnG3C/C,aA0GH8B,IC/GfuB,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFvC,SAASC,eAAe,W","file":"static/js/main.ec0fbdf0.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst api = axios.create({\n  baseURL: \"https://pixabay.com/api/\",\n  params: {\n    key: \"23524775-df2d338982330c0756c93cc31\",\n    per_page: 12,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n  },\n});\n\nexport async function getImages(q) {\n  try {\n    const { data } = await api.get(`?q=${q}`);\n\n    return data;\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nexport async function getNextPage(q, currentPage) {\n  try {\n    const { data } = await api.get(`?q=${q}&page=${currentPage}`);\n\n    return data;\n  } catch (e) {\n    console.log(e);\n  }\n}\n","import PropTypes from \"prop-types\";\r\nimport { Component } from \"react\";\r\n\r\nexport class Searchbar extends Component {\r\n  state = {\r\n    query: \"\",\r\n  };\r\n\r\n  handleChange = (e) => {\r\n    const { value, name } = e.target;\r\n\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.props.onSubmit}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            name=\"query\"\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.query}\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func,\r\n};\r\n","import PropTypes from \"prop-types\";\r\n\r\nexport function ImageGalleryItem({\r\n  tags,\r\n  webformatURL,\r\n  onClick,\r\n  largeImageURL,\r\n}) {\r\n  return (\r\n    <li\r\n      className=\"ImageGalleryItem\"\r\n      onClick={() => onClick({ largeImageURL, tags })}\r\n    >\r\n      <img className=\"ImageGalleryItem-image\" src={webformatURL} alt={tags} />\r\n    </li>\r\n  );\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n  largeImageURL: PropTypes.string,\r\n  werformatURL: PropTypes.string,\r\n  onClick: PropTypes.func,\r\n};\r\n","import { ImageGalleryItem } from \"../ImageGalleryItem/ImageGalleryItem\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport function ImageGallery({ imageArr, onClickImage }) {\r\n  return (\r\n    <ul className=\"ImageGallery\">\r\n      {imageArr.map(({ id, webformatURL, tags, largeImageURL }) => (\r\n        <ImageGalleryItem\r\n          key={id}\r\n          webformatURL={webformatURL}\r\n          largeImageURL={largeImageURL}\r\n          tags={tags}\r\n          onClick={onClickImage}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n\r\nImageGallery.propTypes = {\r\n  imageArr: PropTypes.arrayOf(PropTypes.object),\r\n  onClickImage: PropTypes.func,\r\n};\r\n","import PropTypes from \"prop-types\";\r\n\r\nexport function Button({ children, onClick }) {\r\n  return (\r\n    <button className=\"Button\" type=\"button\" onClick={onClick}>\r\n      {children}\r\n    </button>\r\n  );\r\n}\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func,\r\n};\r\n","import { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst modalRoot = document.getElementById(\"modal-root\");\r\n\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.handleKeydown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.handleKeydown);\r\n  }\r\n\r\n  handleKeydown = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleOverlayClick = (e) => {\r\n    const overlay = document.querySelector(\".Overlay\");\r\n\r\n    if (e.target === overlay) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n  render() {\r\n    return createPortal(\r\n      <div className=\"Overlay\" onClick={this.handleOverlayClick}>\r\n        <div className=\"Modal\">\r\n          <img src={this.props.img.largeImageURL} alt={this.props.img.tags} />\r\n        </div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\n\r\nModal.propTypes = {\r\n  img: PropTypes.object,\r\n};\r\n","import \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport { Component } from \"react\";\r\nimport { getImages, getNextPage } from \"./api/api\";\r\nimport \"./App.scss\";\r\nimport { Searchbar } from \"./components/Searchbar/Searchbar\";\r\nimport { ImageGallery } from \"./components/ImageGallery/ImageGallery\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport { Button } from \"./components/Button/Button\";\r\nimport Modal from \"./components/Modal/Modal\";\r\n\r\nclass App extends Component {\r\n  state = {\r\n    query: \"\",\r\n    imageArr: [],\r\n    currentPage: 1,\r\n    maxPage: 0,\r\n    loading: false,\r\n    showModal: false,\r\n    currentImage: {},\r\n  };\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      this.setState({\r\n        query: e.target.query.value,\r\n        currentPage: 1,\r\n        loading: true,\r\n      });\r\n\r\n      const res = await getImages(e.target.query.value);\r\n      const totalImages = await res.totalHits;\r\n      const imageArr = await res.hits;\r\n\r\n      const maxPage = Math.ceil(totalImages / imageArr.length);\r\n\r\n      this.setState({\r\n        maxPage,\r\n        imageArr,\r\n        loading: false,\r\n      });\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n\r\n  handleClickMore = async () => {\r\n    try {\r\n      this.setState((prev) => {\r\n        return {\r\n          currentPage: prev.currentPage + 1,\r\n          loading: true,\r\n        };\r\n      });\r\n      const res = await getNextPage(\r\n        this.state.query,\r\n        this.state.currentPage + 1\r\n      );\r\n      const images = await res.hits;\r\n\r\n      this.setState((prev) => {\r\n        return {\r\n          imageArr: [...prev.imageArr, ...images],\r\n          loading: false,\r\n        };\r\n      });\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n\r\n  toggleModal = () => {\r\n    this.setState(({ showModal }) => ({\r\n      showModal: !showModal,\r\n    }));\r\n  };\r\n\r\n  handleClickImage = (currentImage) => {\r\n    this.setState({\r\n      currentImage,\r\n    });\r\n\r\n    this.toggleModal();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <Searchbar onSubmit={this.handleSubmit} />\r\n        <ImageGallery\r\n          imageArr={this.state.imageArr}\r\n          onClickImage={this.handleClickImage}\r\n        />\r\n        <Loader\r\n          type=\"TailSpin\"\r\n          color=\"#3f51b5\"\r\n          height={100}\r\n          width={100}\r\n          visible={this.state.loading}\r\n        />\r\n        {/* Отображаем кнопку только если есть изображения на странице и \r\n            отрендеренна НЕпоследняя страница */}\r\n        {this.state.imageArr.length > 0 &&\r\n          this.state.currentPage < this.state.maxPage && (\r\n            <Button onClick={this.handleClickMore}>Load more</Button>\r\n          )}\r\n\r\n        {this.state.showModal && (\r\n          <Modal img={this.state.currentImage} onClose={this.toggleModal} />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}